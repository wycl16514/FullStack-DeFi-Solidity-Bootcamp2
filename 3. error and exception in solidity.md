In this section, we see how to handle error or exception in solidity. Let's have our code example first then we have food for thought,create a new file name SimpleException.sol and have following code:

```sol
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract ExampleException {
    mapping(address => uint) public balanceReceived;

    function receiveMoney() public payable {
        balanceReceived[msg.sender] += msg.value;
    }

    function withdrawMoney(address payable _to, uint _amount) public {
        if (_amount <= balanceReceived[msg.sender]) {
            balanceReceived[msg.sender] -= _amount;
            _to.transfer(_amount);
        }
    }
}

```
Let's save 1 ether to the contract and then try to get back 1.5 ether:
```js
const contract = await ethers.getContractAt("SimpleException", "0x5FbDB2315678afecb367f032d93F642f64180aa3")
await contract.receiveMoney({value: ethers.parseEther("1.0")})
await contract.withdrawMoney("0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266", ethers.parseEther("1.5"))
```
When you run the commands above, they just run nomally and you can't notice you have made a mistake, that is you want to take back more amount than you saved. If we make a
simple change to the code as following:

```sol
function withdrawMoney(address payable _to, uint _amount) public {
        require(_amount <= balanceReceived[msg.sender], "Not enought funds, aborting");
        balanceReceived[msg.sender] -= _amount;
        _to.transfer(_amount);
    }
```
We are using require directive to replace the if keyword, deploy the contract and run the commands again, then you wil get following result:
```js
> await contract.withdrawMoney("0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266", ethers.parseEther("1.5"))
ProviderError: Error: VM Exception while processing transaction: reverted with reason string 'Not enought funds, aborting'
    at HttpProvider.request (/Users/my/Documents/udemy fullstack DeFi/code/FullStackDeFiApps/learning/my-defi-apps/node_modules/hardhat/src/internal/core/providers/http.ts:96:21)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at HardhatEthersSigner.sendTransaction (/Users/my/Documents/udemy fullstack DeFi/code/FullStackDeFiApps/learning/my-defi-apps/node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:125:18)
    at send (/Users/my/Documents/udemy fullstack DeFi/code/FullStackDeFiApps/learning/my-defi-apps/node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.withdrawMoney (/Users/my/Documents/udemy fullstack DeFi/code/FullStackDeFiApps/learning/my-defi-apps/node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at REPL225:1:33
    at node:repl:645:29
```
You can see there is an error occured and the transaction is reverted, and it shows the string we set into the require to indicate what kind of error happended. Let's see 
another directive that is very useful in preventing error, assert is used to check some kind of situation should never happen, if it dose happend, then the transaction will
fail and rollback.
